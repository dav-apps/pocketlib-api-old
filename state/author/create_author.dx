(# params: session: Session, params: Hash, data: Hash)
(# Check if the user is an admin)
(var admins (get_env "ADMINS"))
(var is_admin (admins.contains session.user_id))

(# Get the authors of the user)
(var authors (func get_table_objects_of_user ("Author" session.user_id)))

(# Get the publisher)
(var publisher (func get_table_object (data.publisher session.user_id "Publisher")))

(return (hash
	(is_admin is_admin)
	(authors authors)
	(publisher publisher)
))