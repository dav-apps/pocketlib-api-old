(# params: store_book: TableObject, published: boolean)
(var releases_str store_book.properties.releases)
(if ((is_nil releases_str) or (releases_str.length == 0)) (return nil))

(var releases (releases_str.split ","))

(if published (
	(for release_uuid in releases.reverse (
		(var release (func get_table_object (release_uuid)))
		(if (release.properties.status == "published") (
			(return release)
		))
	))
))

(return (func get_table_object ((releases.pop))))